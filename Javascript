const express = require('express');
const cors = require('cors');
const bodyParser = require('body-parser');
const sqlite3 = require('sqlite3').verbose();
const path = require('path');

const app = express();
const PORT = process.env.PORT || 5000;

// Middleware
app.use(cors());
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: true }));

// Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
const db = new sqlite3.Database('./database.db', (err) => {
  if (err) {
    console.error('Error opening database:', err.message);
  } else {
    console.log('Connected to SQLite database.');
    initializeDatabase();
  }
});

// ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
function initializeDatabase() {
  // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
  db.run(`CREATE TABLE IF NOT EXISTS Users (
    UserID INTEGER PRIMARY KEY AUTOINCREMENT,
    FullName TEXT NOT NULL,
    UserType TEXT NOT NULL CHECK(UserType IN ('Ù…Ø²ÙˆØ¯', 'Ù…Ø¯ÙŠØ±')),
    Email TEXT UNIQUE,
    PhoneNumber TEXT,
    IsVerified BOOLEAN DEFAULT 0,
    CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP
  )`);

  // Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªØ®ØµØµØ§Øª
  db.run(`CREATE TABLE IF NOT EXISTS Specializations (
    SpecID INTEGER PRIMARY KEY AUTOINCREMENT,
    SpecName TEXT NOT NULL,
    IconURL TEXT,
    CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP
  )`);

  // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª
  db.run(`CREATE TABLE IF NOT EXISTS Services (
    ServiceID INTEGER PRIMARY KEY AUTOINCREMENT,
    UserID INTEGER,
    SpecID INTEGER,
    Title TEXT NOT NULL,
    Description TEXT,
    BasePrice DECIMAL(10,2),
    CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (UserID) REFERENCES Users(UserID),
    FOREIGN KEY (SpecID) REFERENCES Specializations(SpecID)
  )`);

  // Ø¬Ø¯ÙˆÙ„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„
  db.run(`CREATE TABLE IF NOT EXISTS ContactRequests (
    RequestID INTEGER PRIMARY KEY AUTOINCREMENT,
    RequestedServiceID INTEGER,
    ClientPhoneNumber TEXT NOT NULL,
    ClientRequestDescription TEXT,
    Status TEXT DEFAULT 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©',
    CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (RequestedServiceID) REFERENCES Services(ServiceID)
  )`);

  // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
  db.run(`CREATE TABLE IF NOT EXISTS Transactions (
    TransID INTEGER PRIMARY KEY AUTOINCREMENT,
    RequestID INTEGER,
    TotalAmount DECIMAL(10,2),
    PlatformFee DECIMAL(10,2),
    ProfessionalPayout DECIMAL(10,2),
    PaymentStatus TEXT DEFAULT 'Ù…Ø¹Ù„Ù‚',
    CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (RequestID) REFERENCES ContactRequests(RequestID)
  )`);

  // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
  addSampleData();
}

function addSampleData() {
  // Ø¥Ø¶Ø§ÙØ© ØªØ®ØµØµØ§Øª
  const specializations = [
    { name: 'Ù…ØµÙˆØ±ÙˆÙ†', icon: 'ğŸ“·' },
    { name: 'Ù…ØªØ±Ø¬Ù…ÙˆÙ†', icon: 'ğŸŒ' },
    { name: 'Ù…ØµÙ…Ù…ÙˆÙ†', icon: 'ğŸ¨' },
    { name: 'Ù…Ø¨Ø±Ù…Ø¬ÙˆÙ†', icon: 'ğŸ’»' },
    { name: 'ÙƒØªØ§Ø¨', icon: 'âœï¸' },
    { name: 'Ù…Ø¯Ø±Ø¨ÙˆÙ†', icon: 'ğŸ‹ï¸' }
  ];

  specializations.forEach(spec => {
    db.run(`INSERT OR IGNORE INTO Specializations (SpecName, IconURL) VALUES (?, ?)`, 
      [spec.name, spec.icon]);
  });

  // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ØªØ¬Ø±ÙŠØ¨ÙŠÙŠÙ†
  db.run(`INSERT OR IGNORE INTO Users (FullName, UserType, Email, PhoneNumber, IsVerified) VALUES 
    ('Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯', 'Ù…Ø²ÙˆØ¯', 'ahmed@example.com', '0512345678', 1),
    ('ÙØ§Ø·Ù…Ø© Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡', 'Ù…Ø²ÙˆØ¯', 'fatima@example.com', '0554321098', 1),
    ('Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…', 'Ù…Ø¯ÙŠØ±', 'admin@example.com', '0500000000', 1)`);
}

// Ø§Ù„Ø±ÙˆØ§Øª (Routes)

// Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ®ØµØµØ§Øª
app.get('/api/specializations', (req, res) => {
  db.all('SELECT * FROM Specializations ORDER BY SpecName', (err, rows) => {
    if (err) {
      res.status(500).json({ error: err.message });
      return;
    }
    res.json(rows);
  });
});

// Ø¬Ù„Ø¨ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ØªØ®ØµØµ
app.get('/api/services/:specId', (req, res) => {
  const specId = req.params.specId;
  const sql = `
    SELECT s.*, u.FullName, u.IsVerified 
    FROM Services s 
    JOIN Users u ON s.UserID = u.UserID 
    WHERE s.SpecID = ? AND u.IsVerified = 1
  `;
  
  db.all(sql, [specId], (err, rows) => {
    if (err) {
      res.status(500).json({ error: err.message });
      return;
    }
    res.json(rows);
  });
});

// Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ ØªÙˆØ§ØµÙ„ Ø¬Ø¯ÙŠØ¯
app.post('/api/contact-requests', (req, res) => {
  const { requestedServiceID, clientPhoneNumber, clientRequestDescription } = req.body;
  
  const sql = `INSERT INTO ContactRequests (RequestedServiceID, ClientPhoneNumber, ClientRequestDescription) VALUES (?, ?, ?)`;
  
  db.run(sql, [requestedServiceID, clientPhoneNumber, clientRequestDescription], function(err) {
    if (err) {
      res.status(500).json({ error: err.message });
      return;
    }
    res.json({ 
      message: 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­', 
      requestID: this.lastID 
    });
  });
});

// Ø¬Ù„Ø¨ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„
app.get('/api/contact-requests', (req, res) => {
  const sql = `
    SELECT cr.*, s.Title as ServiceTitle, u.FullName as ProfessionalName 
    FROM ContactRequests cr 
    JOIN Services s ON cr.RequestedServiceID = s.ServiceID 
    JOIN Users u ON s.UserID = u.UserID 
    ORDER BY cr.CreatedAt DESC
  `;
  
  db.all(sql, [], (err, rows) => {
    if (err) {
      res.status(500).json({ error: err.message });
      return;
    }
    res.json(rows);
  });
});

app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createStackNavigator } from '@react-navigation/stack';
import { StatusBar } from 'expo-status-bar';

// Ø§Ù„Ø´Ø§Ø´Ø§Øª
import HomeScreen from './src/screens/HomeScreen';
import SpecializationsScreen from './src/screens/SpecializationsScreen';
import ProfessionalsScreen from './src/screens/ProfessionalsScreen';
import RequestScreen from './src/screens/RequestScreen';
import ConfirmationScreen from './src/screens/ConfirmationScreen';

const Stack = createStackNavigator();

export default function App() {
  return (
    <NavigationContainer>
      <StatusBar style="auto" />
      <Stack.Navigator 
        initialRouteName="Home"
        screenOptions={{
          headerStyle: {
            backgroundColor: '#2E86AB',
          },
          headerTintColor: '#fff',
          headerTitleStyle: {
            fontWeight: 'bold',
          },
        }}
      >
        <Stack.Screen 
          name="Home" 
          component={HomeScreen}
          options={{ title: 'Ø§Ù„Ù…ØªØ®ØµØµÙŠÙ† Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠÙŠÙ†' }}
        />
        <Stack.Screen 
          name="Specializations" 
          component={SpecializationsScreen}
          options={{ title: 'Ø§Ù„ØªØ®ØµØµØ§Øª' }}
        />
        <Stack.Screen 
          name="Professionals" 
          component={ProfessionalsScreen}
          options={{ title: 'Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ†' }}
        />
        <Stack.Screen 
          name="Request" 
          component={RequestScreen}
          options={{ title: 'Ø·Ù„Ø¨ Ø®Ø¯Ù…Ø©' }}
        />
        <Stack.Screen 
          name="Confirmation" 
          component={ConfirmationScreen}
          options={{ headerShown: false }}
        />
      </Stack.Navigator>
    </NavigationContainer>
  );
  }import React from 'react';
import {
  View,
  Text,
  TextInput,
  TouchableOpacity,
  StyleSheet,
  ScrollView,
  Image
} from 'react-native';

const HomeScreen = ({ navigation }) => {
  return (
    <ScrollView style={styles.container}>
      {/* Ø§Ù„Ù‡ÙŠØ¯Ø± */}
      <View style={styles.header}>
        <Text style={styles.logo}>Ø§Ù„Ù…ØªØ®ØµØµÙŠÙ† Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠÙŠÙ†</Text>
        <Text style={styles.subtitle}>Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø­ØªØ±ÙÙƒ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯</Text>
      </View>

      {/* Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« */}
      <View style={styles.searchContainer}>
        <TextInput
          style={styles.searchInput}
          placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…ØªØ®ØµØµÙƒ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯..."
          placeholderTextColor="#999"
        />
        <View style={styles.searchIcon}>ğŸ”</View>
      </View>

      {/* Ø²Ø± Ø§Ù„ØªØ®ØµØµØ§Øª */}
      <TouchableOpacity
        style={styles.ctaButton}
        onPress={() => navigation.navigate('Specializations')}
      >
        <Text style={styles.ctaText}>ØªØµÙØ­ Ø§Ù„ØªØ®ØµØµØ§Øª</Text>
      </TouchableOpacity>

      {/* Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª */}
      <View style={styles.features}>
        <View style={styles.featureCard}>
          <Text style={styles.featureIcon}>ğŸ“</Text>
          <Text style={styles.featureTitle}>Ù…Ø­ØªØ±ÙÙˆÙ† Ù…Ø¹ØªÙ…Ø¯ÙˆÙ†</Text>
          <Text style={styles.featureDesc}>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØ®ØµØµÙŠÙ† Ø­Ø§ØµÙ„ÙŠÙ† Ø¹Ù„Ù‰ Ù…Ø¤Ù‡Ù„Ø§Øª Ø¬Ø§Ù…Ø¹ÙŠØ©</Text>
        </View>
        
        <View style={styles.featureCard}>
          <Text style={styles.featureIcon}>ğŸ’¼</Text>
          <Text style={styles.featureTitle}>Ø®Ø¯Ù…Ø§Øª Ù…ØªÙ†ÙˆØ¹Ø©</Text>
          <Text style={styles.featureDesc}>Ù…Ø¬Ù…ÙˆØ¹Ø© ÙˆØ§Ø³Ø¹Ø© Ù…Ù† Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</Text>
        </View>
        
        <View style={styles.featureCard}>
          <Text style={styles.featureIcon}>ğŸ›¡ï¸</Text>
          <Text style={styles.featureTitle}>ÙˆØ³Ø§Ø·Ø© Ø¢Ù…Ù†Ø©</Text>
          <Text style={styles.featureDesc}>Ù†Ø¶Ù…Ù† Ø­Ù‚ÙˆÙ‚Ùƒ Ù…Ù† Ø®Ù„Ø§Ù„ Ù†Ø¸Ø§Ù… ÙˆØ³Ø§Ø·Ø© Ù…ÙˆØ«ÙˆÙ‚</Text>
        </View>
      </View>
    </ScrollView>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
  },
  header: {
    alignItems: 'center',
    paddingVertical: 40,
    backgroundColor: '#2E86AB',
  },
  logo: {
    fontSize: 28,
    fontWeight: 'bold',
    color: '#fff',
    marginBottom: 8,
  },
  subtitle: {
    fontSize: 16,
    color: '#fff',
    opacity: 0.9,
  },
  searchContainer: {
    flexDirection: 'row',
    alignItems: 'center',
    margin: 20,
    backgroundColor: '#fff',
    borderRadius: 12,
    borderWidth: 2,
    borderColor: '#2E86AB',
    paddingHorizontal: 15,
  },
  searchInput: {
    flex: 1,
    height: 50,
    fontSize: 16,
    textAlign: 'right',
  },
  searchIcon: {
    marginLeft: 10,
  },
  ctaButton: {
    backgroundColor: '#2E86AB',
    marginHorizontal: 20,
    height: 50,
    borderRadius: 12,
    justifyContent: 'center',
    alignItems: 'center',
    marginBottom: 30,
  },
  ctaText: {
    color: '#fff',
    fontSize: 18,
    fontWeight: 'bold',
  },
  features: {
    padding: 20,
  },
  featureCard: {
    backgroundColor: '#f8f9fa',
    padding: 20,
    borderRadius: 12,
    marginBottom: 15,
    alignItems: 'center',
    borderWidth: 1,
    borderColor: '#e9ecef',
  },
  featureIcon: {
    fontSize: 40,
    marginBottom: 10,
  },
  featureTitle: {
    fontSize: 18,
    fontWeight: 'bold',
    color: '#2E86AB',
    marginBottom: 5,
  },
  featureDesc: {
    fontSize: 14,
    color: '#666',
    textAlign: 'center',
  },
});

export default HomeScreen;http://localhost:5000/apistyles.nameaxios.postimport React from 'react';
import {
  View,
  Text,
  TouchableOpacity,
  StyleSheet
} from 'react-native';

const ConfirmationScreen = ({ navigation }) => {
  return (
    <View style={styles.container}>
      <View style={styles.content}>
        <Text style={styles.icon}>âœ“</Text>
        <Text style={styles.title}>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!</Text>
        <Text style={styles.message}>
          Ù…Ø³Ø±ÙˆØ±ÙŠÙ† ÙÙŠ ØªØ¹Ø§Ù…Ù„Ùƒ Ù…Ø¹Ù†Ø§ØŒ Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ ÙÙŠ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª.
        </Text>
        
        <TouchableOpacity
          style={styles.homeButton}
          onPress={() => navigation.navigate('Home')}
        >
          <Text style={styles.homeButtonText}>Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</Text>
        </TouchableOpacity>
        
        <TouchableOpacity
          style={styles.specializationsButton}
          onPress={() => navigation.navigate('Specializations')}
        >
          <Text style={styles.specializationsButtonText}>ØªØµÙØ­ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®Ø¯Ù…Ø§Øª</Text>
        </TouchableOpacity>
      </View>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
    justifyContent: 'center',
    alignItems: 'center',
    padding: 20,
  },
  content: {
    alignItems: 'center',
    width: '100%',
  },
  icon: {
    fontSize: 80,
    color: '#28a745',
    marginBottom: 30,
  },
  title: {
    fontSize: 24,
    fontWeight: 'bold',
    color: '#2E86AB',
    textAlign: 'center',
    marginBottom: 15,
  },
  message: {
    fontSize: 18,
    color: '#666',
    textAlign: 'center',
    lineHeight: 28,
    marginBottom: 40,
  },
  homeButton: {
    backgroundColor: '#2E86AB',
    paddingVertical: 15,
    paddingHorizontal: 30,
    borderRadius: 8,
    marginBottom: 15,
    width: '100%',
    alignItems: 'center',
  },
  homeButtonText: {
    color: '#fff',
    fontSize: 18,
    fontWeight: 'bold',
  },
  specializationsButton: {
    borderWidth: 2,
    borderColor: '#2E86AB',
    paddingVertical: 15,
    paddingHorizontal: 30,
    borderRadius: 8,
    width: '100%',
    alignItems: 'center',
  },
  specializationsButtonText: {
    color: '#2E86AB',
    fontSize: 16,
    fontWeight: 'bold',
  },
});

export default ConfirmationScreen;
